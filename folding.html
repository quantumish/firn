<html><head><meta charset="UTF-8" /><meta content="width=device-width, initial-scale=1.0" name="viewport" /><link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans:ital,wght@0,400;0,500;1,400&amp;display=swap" rel="stylesheet" /><link href="https://firn.theiceshelf.com/static/css/prism.css" rel="stylesheet" /><link href="https://firn.theiceshelf.com/static/css/firn_base.css" rel="stylesheet" /><link href="https://firn.theiceshelf.com/static/css/basscss.css" rel="stylesheet" /><link href="https://firn.theiceshelf.com/static/css/customization.css" rel="stylesheet" /><link href="https://firn.theiceshelf.com/static/img/favico.png" rel="icon" type="image/png" /><title>Firn - The Ice Shelf</title><script src="https://firn.theiceshelf.com/static/js/prism.js"></script></head><body><nav class="nav"><div class="nav-container"><div class="nav-left"><div id="nav-icon" onClick="toggleMenu()"><span></span><span></span><span></span><span></span></div><img class="nav-logo" src="https://firn.theiceshelf.com/static/img/ico-light.png" width="32" /></div><div class="nav-links"><a class="nav-links-item" href="https://firn.theiceshelf.com/"><span>Home</span></a><a class="nav-links-item" href="https://firn.theiceshelf.com/getting-started"><span>Docs</span></a><a class="nav-links-item" href="https://github.com/theiceshelf/firn"><span>Github</span></a></div></div></nav><main class="def-wrapper"><aside class="def-sidebar unfocused" id="sidebar"><ul class="firn-sitemap firn-sitemap-item--parent"><li><a class="firn-sitemap-item--link" href="https://firn.theiceshelf.com/index">Home</a></li><li class="firn-sitemap-item--child"><a class="firn-sitemap-item--link" href="https://firn.theiceshelf.com/getting-started">Getting Started</a><ul class="firn-sitemap-item--parent"><li><a class="firn-sitemap-item--link" href="https://firn.theiceshelf.com/tutorial">Step by Step Tutorial</a></li><li><a class="firn-sitemap-item--link" href="https://firn.theiceshelf.com/setup">Firn Setup (with Emacs)</a></li></ul></li><li class="firn-sitemap-item--child"><a class="firn-sitemap-item--link" href="https://firn.theiceshelf.com/content">Content</a><ul class="firn-sitemap-item--parent"><li><a class="firn-sitemap-item--link" href="https://firn.theiceshelf.com/front-matter">Front Matter</a></li><li class="firn-sitemap-item--child"><a class="firn-sitemap-item--link" href="https://firn.theiceshelf.com/layout">Layouts and Partials</a><ul class="firn-sitemap-item--parent"><li><a class="firn-sitemap-item--link" href="https://firn.theiceshelf.com/layout_examples">Layout/Partial Examples</a></li></ul></li><li class="firn-sitemap-item--child"><a class="firn-sitemap-item--link" href="https://firn.theiceshelf.com/the-render-function">The Render Function</a><ul class="firn-sitemap-item--parent"><li><a class="firn-sitemap-item--link" href="https://firn.theiceshelf.com/files-and-headlines">Files And Headlines</a></li><li><a class="firn-sitemap-item--link" href="https://firn.theiceshelf.com/folding">Folding</a></li><li><a class="firn-sitemap-item--link" href="https://firn.theiceshelf.com/sitemap">Sitemap</a></li><li><a class="firn-sitemap-item--link" href="https://firn.theiceshelf.com/adjacent-files">Adjacent Files</a></li><li><a class="firn-sitemap-item--link" href="https://firn.theiceshelf.com/backlinks_and_related_files">Backlinks and Related Files</a></li><li><a class="firn-sitemap-item--link" href="https://firn.theiceshelf.com/org_tags">Org Tags</a></li><li><a class="firn-sitemap-item--link" href="https://firn.theiceshelf.com/firn_tags">Firn Tags</a></li><li><a class="firn-sitemap-item--link" href="https://firn.theiceshelf.com/table-of-contents">Table Of Contents</a></li><li><a class="firn-sitemap-item--link" href="https://firn.theiceshelf.com/logbooks">Logbooks</a></li><li><a class="firn-sitemap-item--link" href="https://firn.theiceshelf.com/breadcrumbs">Breadcrumbs</a></li></ul></li><li><a class="firn-sitemap-item--link" href="https://firn.theiceshelf.com/pages">Custom Pages</a></li><li><a class="firn-sitemap-item--link" href="https://firn.theiceshelf.com/styling">Styling</a></li><li><a class="firn-sitemap-item--link" href="https://firn.theiceshelf.com/data-and-metadata">Data and Metadata</a></li><li><a class="firn-sitemap-item--link" href="https://firn.theiceshelf.com/static-assets">Static Assets / Attachments</a></li></ul></li><li class="firn-sitemap-item--child"><div class="firn-sitemap-item--no-link">Reference</div><ul class="firn-sitemap-item--parent"><li><a class="firn-sitemap-item--link" href="https://firn.theiceshelf.com/configuration">Configuration</a></li><li><a class="firn-sitemap-item--link" href="https://firn.theiceshelf.com/limitations">Limitations</a></li><li><a class="firn-sitemap-item--link" href="https://firn.theiceshelf.com/sample-page">Sample Page</a></li><li><a class="firn-sitemap-item--link" href="https://firn.theiceshelf.com/changelog">Changelog</a></li><li><a class="firn-sitemap-item--link" href="https://firn.theiceshelf.com/repl">Repl</a></li></ul></li></ul></aside><article class="def-content-wrap"><div class="def-content"><h1 class="mb0">Folding</h1><div class="flex h6 mb1"><div class="pr1">Last updated: </div><div class="italic">2020-10-19 08:27</div></div><div><section><p><strong><span>Purpose:</span></strong><span> Firn has a basic implementation of headline folding, mimicking
org-mode; this document explains how to configure folding.</span></p><p><strong><span>Prerequistes</span></strong><span>: an understanding of </span><a class="firn-internal" href="https://firn.theiceshelf.com/the-render-function">The Render Function</a><span>, </span><a class="firn-internal" href="https://firn.theiceshelf.com/layout">layouts</a><span> and </span><a class="firn-internal" href="https://firn.theiceshelf.com/front-matter">front matter</a><span>.</span></p></section><div class="firn-headline-section firn-headline-section-1"><h1 class="firn-headline firn-headline-1" id="overview"><span class="firn-headline-text"><span>Overview</span></span></h1><section><p><span>Firn includes basic semantic HTML folding that aims to replicate org-mode
headline folding. JavaScript is not used to accomplish folding (although this is
certainly possible); instead, Firn uses the </span><code>details</code><span> and </span><code>summary</code><span> tag to
accomplish similar functionality.</span></p><p><span>Due to how the summary and details tag work, there is some finicky styling and
all the same features of using normal headlines (tags, keywords, properties,
etc) may not work as well. Incorporating folding may require some user styling
in the </span><code>firn_base.css</code><span> stylesheet.</span></p><p><span>Similar to a table of contents, you can set Firn's folding on a site-wide,
layout-wide, or file-specific basis.</span></p><p><span>Folding supports up to 6 headings (corresponding from </span><code>h1</code><span> to </span><code>h6</code><span>)</span></p></section></div><div class="firn-headline-section firn-headline-section-1"><h1 class="firn-headline firn-headline-1" id="usage"><span class="firn-headline-text"><span>Usage</span></span></h1><section><p><span>Folding is configured based on a Clojure map that determines which headline
levels are folded:</span></p><pre class="language-clojure"><code class="language-clojure">{1 false ; level 1 headlines start folded
 2 true  ; level 2 headlines start open
 4 true  ; level 4 headlines start open
 }
</code></pre><p><span>You may have noticed in the example above that the Clojure map does not have a key for </span><code>3</code><span> - this is intentional - this will cause level 3 headlines (and their respective content) to not be foldable </span><em><span>at all</span></em><span>.</span></p></section><details class="firn-fold firn-fold-2" open="open"><summary class="firn-headline-summary-2">Site-wide</summary><div class="firn-headline-section-folded firn-headline-section-2"><h2 class="firn-headline firn-headline-2 firn-headline-hidden" id="site-wide"><span class="firn-headline-text-hidden"><span>Site-wide</span></span></h2><section><p><span>In your </span><code>config.edn</code><span> file, add a Clojure map such as the example above under the  </span><code>:firn-fold</code><span> keyword:</span></p><pre class="language-clojure"><code class="language-clojure">
; ...
 :firn-fold  {3 true 4 true}
; ...
</code></pre><p><span>As such, </span><strong><span>all</span></strong><span> headlines of level 3 and 4 will have fold-toggles and start open.</span></p></section></div></details><details class="firn-fold firn-fold-2" open="open"><summary class="firn-headline-summary-2">In-layout</summary><div class="firn-headline-section-folded firn-headline-section-2"><h2 class="firn-headline firn-headline-2 firn-headline-hidden" id="in-layout"><span class="firn-headline-text-hidden"><span>In-layout</span></span></h2><section><p><span>In your </span><a class="firn-internal" href="https://firn.theiceshelf.com/layout">layouts</a><span>, you can use the </span><a class="firn-internal" href="https://firn.theiceshelf.com/the-render-function">render function</a><span> to determine folding on a per-layout basis.</span></p><pre class="language-clojure"><code class="language-clojure">;; example 1:
(render :file {:firn-fold {1 true 2 true}}) ; All H1 and H2's will be folded, and will be started open.

;; example 2:
(render :file {:firn-fold {3 false  4 false 5}}) ; H3 through H5 will be foldable, and will start closed.
</code></pre></section></div></details><details class="firn-fold firn-fold-2" open="open"><summary class="firn-headline-summary-2">Per-file</summary><div class="firn-headline-section-folded firn-headline-section-2"><h2 class="firn-headline firn-headline-2 firn-headline-hidden" id="per-file"><span class="firn-headline-text-hidden"><span>Per-file</span></span></h2><section><p><span>Using </span><a class="firn-internal" href="https://firn.theiceshelf.com/front-matter">Front Matter</a><span>, you can configure folding on a per-file basis. The file you are reading currently uses front matter to add folding just for this file for example purposes.</span></p><p><span>The front matter of this document looks as follows:</span></p><pre class="language-org"><code class="language-org">#+TITLE: Folding
#+FIRN_UNDER: Content "The Render Function"
#+FIRN_FOLD: {2 true 3 true}
</code></pre></section></div></details><details class="firn-fold firn-fold-2" open="open"><summary class="firn-headline-summary-2">Styling</summary><div class="firn-headline-section-folded firn-headline-section-2"><h2 class="firn-headline firn-headline-2 firn-headline-hidden" id="styling"><span class="firn-headline-text-hidden"><span>Styling</span></span></h2><section><p><span>You may need to style your headings based on what you need from folding; CSS rules pertinent to folding can be found in the </span><code>firn_base.css</code><span> file.</span></p></section></div></details></div></div><div class="adjacent-files"><span><div class="firn-file-navigation"><span class="firn-file-nav-prev">Previous: <a href="https://firn.theiceshelf.com/files-and-headlines">Files And Headlines</a></span> <span class="firn-file-nav-next">Next: <a href="https://firn.theiceshelf.com/sitemap">Sitemap</a></span></div></span></div><footer><script src="/static/js/main.js"></script></footer></div></article><aside class="def-toc unfocused" id="toc"><div><h4>Contents</h4><div><ol><li><a href="#overview">Overview</a></li><li><a href="#usage">Usage</a><ol><li><a href="#site-wide">Site-wide</a></li><li><a href="#in-layout">In-layout</a></li><li><a href="#per-file">Per-file</a></li><li><a href="#styling">Styling</a></li></ol></li></ol></div></div><div><h4>Backlinks</h4><ul class="firn-backlinks"><li class="firn-backlink"><a href="https://firn.theiceshelf.com/the-render-function">The Render Function</a></li><li class="firn-backlink"><a href="https://firn.theiceshelf.com/front-matter">Front Matter</a></li></ul></div></aside></main></body></html>